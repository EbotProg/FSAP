<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/styles/index.css">
    <link rel="stylesheet" href="/styles/registration.css">
    <link rel="stylesheet" href="/styles/all.css">
</head>
<body>
    

<div class="reg-main">
     <div class="reg-container">
    <div class="reg-image">
        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="rgba(48, 3, 48, 0.395)" class="bi bi-files" viewBox="0 0 16 16">
            <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>
          </svg>
          <h1 class="reg-title2">FSAP</h1>
    </div>
    <div class="reg-content">
        <div class="reg-content-header d-flex flex-column">
            <h2 class="reg-title2 font-weight-bold text-center">Sign Up</h2>
             <div class="sign-in-border align-self-center mb-3"></div>

        <!--check if user info is already found in database-->
        <% if(locals.usernameTaken == true){ %>
            <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
                <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                  </svg> 
                  <div class="col-11 px-4">Invalid username</div>
              </div>
         <% } %>
         <% if(locals.emailTaken == true){ %>
            <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
                <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                  </svg> 
                  <div class="col-11 px-4">Invalid email</div>
              </div>
         <% } %>

<!-- this is the authentication part for the registration page-->
<% if(locals.emailIsValid == true){ %>
    <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
        <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </svg> 
          <div class="col-11 px-4">Invalid email</div>
      </div>
 <% } %>

 <% if(locals.usernameIsValid == true){ %>
    <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
        <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </svg> 
          <div class="col-11 px-4">Invalid username</div>
      </div>
 <% } %>

 <% if(locals.incorrectPassword == true){ %>
    <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
        <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </svg> 
          <div class="col-11 px-4">Invalid password</div>
      </div>
 <% } %>

 <% if(locals.weakPassword == true){ %>
    <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
        <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </svg> 
          <div class="col-11 px-4">Password is weak</div>
      </div>
 <% } %>
        <!--Simple form verification-->
        <%// if(typeof alert != 'undefined'){ %>
        <%// alert.forEach(error => { %>
          <!--  <div class="alert alert-warning d-flex flex-row justify-content-center align-items-center row gx-2 px-4" role="alert">
                <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                  </svg> 
                  <div class="col-11 px-4"><%//= error.msg %></div>
               </div>
              -->
          <%// }); %>
          <%// } %>
         
          <!--message showed if email is not sent-->
           <% if(locals.emailSent == false){ %>
            <div class="alert alert-danger d-flex flex-row justify-content-center align-items-center row gx-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="col-1" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg> 
              <div class="col-11">Sorry, something went wrong.Please sign up again</div>
              </div>
           <% } %>



        </div>

        <form id="reg-form" action="/register" method="post">
          <div class="row gx-2 gy-3"> 
                <div class="form-floating text-start">
                    <input type="email" class="form-control" <% if(locals.populateInfo.email !== undefined){ %> value="<%= locals.populateInfo.email %>" <%} %> name="email" id="email" placeholder="Email">
                    <label for="email">Email</label>
                </div>
                <div class="form-floating text-start">
                    <input type="text" class="form-control" name="username" <% if(locals.populateInfo.username !== undefined){ %> value="<%= locals.populateInfo.username %>" <%} %>  id="username" placeholder="username" >
                    <label for="username" class="align-self-start">Username</label>

                </div>
                <div class="form-floating text-start">
                    <input type="password" class="form-control" <% if(locals.populateInfo.password !== undefined){ %> value="<%= locals.populateInfo.password %>" <%} %>  name="password" id="password" placeholder="password">
                    <label for="password" class="align-self-start">Password</label>

                </div>
                <div class="form-floating text-start">
                    <input type="password" class="form-control" <% if(locals.populateInfo.confirmPassword !== undefined){ %> value="<%= locals.populateInfo.confirmPassword %>" <%} %>  name="confirmPassword" id="confirmPassword" placeholder="Confirm password">
                    <label for="confirmPassword" class="align-self-start">Confirm password</label>

                </div>
                <button type="submit" id="reg-submit" onclick="disableBtn()" class="sign-up-btn btn align-self-center bottom-btn mb-2"><span class="sign-up-btn-first-text">Sign up</span></button>
                <span class="signing-up d-none text-center">Please wait...<br>signing up</span>
           </div> 
            
        </form>
        <a href="/loginPage" class="sign-in-link">You have an account?Sign in</a>
    </div>
</div>
</div>


<script src="/styles/index.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>